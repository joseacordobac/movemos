---
import OurServices from '../../components/organism/OurServices/OurServices.astro';
import CTA from '../../components/molecules/CTA/CTA.astro';
import Layout from '../../layouts/Layout.astro';
import {getPages} from '../../services/pages'

const pages = await getPages('servicios');
const content =pages[0].fields.contenido_flexible

const components = {
  'services_list': OurServices,
  'contact_btn': CTA
}

---

<Layout>
    {content.map((section: any) => {
     
      const { acf_fc_layout, data } = section;
      const Component = components[acf_fc_layout as keyof typeof components];

      if (!Component) {
       console.warn(`⚠️ Componente desconocido: ${acf_fc_layout}`);
        return <div style="color:red;">Componente no encontrado: {acf_fc_layout}</div>;
      }
      return <Component data={data} />;
    })}
  </Layout>